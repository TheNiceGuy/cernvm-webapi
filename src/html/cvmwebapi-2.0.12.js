window.CVM={version:"2.0.12"};(function(w){var m="data:image/gif;base64,R0lGODlhIAAgALMAAGZmZnl5eczMzJ+fn////7Ozs4yMjGtra+Li4nFxcaampgAAAAAAAAAAAAAAAAAAACH5BAEHAAQALAAAAAAgACAAAASjkMhJq704681JKV04JYkYDgAwmBuSpgibGS9gyJdQpwJeBTtAwDcpBFMgYuJ1WKZKPlRqSACmVjLXK2l8xVi0raSbupl0Ne6uJ7K+zOEXtUOWS9zijrNGxT87UjtURyothAASh18YcUGJhGY5hzZ7R2wWfpNHcxR1lmiHSRSVQQoSCpNQE4GQEo1HWARamgcHmjCut7pvBKC7ugKZv4ecRMYsEQA7";var f="data:image/gif;base64,R0lGODlhIAAgAMQAAGZmZnt7e8TExK2treXl5dXV1Wtra4qKivj4+L29vd7e3pGRke/v78zMzLW1tYSEhHR0dJmZmQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEHAAgALAAAAAAgACAAAAXUICKOZGmeKMoUguMIBZPOY3IAeI4fCX0KEJ0wBxH4RouhMrfwEQLLKCBAmEGl0UAqmRUQBsumSYBtjG5KYykoVYwiS0gpgQUsZAVp71zHsaMHIwx9hAAyCHmACQoEDn9RBSJkSweMI5NSag51VSJ1DiKbWJ0In5JYBiOJmSKrYSNgWJEIg3ojV1KHCGhLnbVSgTVRciINdXsjjzpaxVjEJJhDbiIKCrhCaiVcQwEJBAoJD68o14VTM0/mOFQ+231iR0B1RUdzvEI89SosLjC6+gBnhAAAOw==";var q="data:image/gif;base64,R0lGODlhIAAgALMAAGZmZpOTk93d3Wtra8zMzLW1tXNzc3p6eu/v78XFxYODg9bW1qWlpejo6Pj4+IqKiiH5BAEHAA4ALAAAAAAgACAAAATr0MlJq7046827p4QBGMTHicBoVohApTAlIN4yjE1TwGmRH4DBooMa3XipQXFA0wiQ0ChguAHyFCUJQYE8dBqogY8BPDB0R0Pje0zYkMJEcs3ZAQKII7zx6GlCPAsMKQcuC1YMBDwkF0UpDih0DgspBghIBhdQDjcDEgEOl0EOmxaOAJApLlqVojCZFoeBgwAHQ4AAiTy2GnZ4p619AAUdeSlupwYLckFNG2BJBQgMIgYMCAVpkhpWMFg0CFuYHE9S5lMnr3o8SjBM5DcHDdhI0g1AQh+rEkgyziupKgHMsKAalYEIEypcyHBDBAA7";var y="data:image/gif;base64,R0lGODlhIAAgANUAAPX19fT09PLy8vDw8O7u7uzs7OLi4tnZ2c/Pz83NzczMzMXFxby8vLKysqmpqZ+fn5iYmJWVlZKSkoyMjICAgHx8fHl5eXZ2dnR0dHBwcG9vb21tbWtra2pqamhoaGdnZ2ZmZkxMTEpKSv///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEHACMALAAAAAAgACAAAAauwJFwSCwaj8ikcln5OJ/QqFRKnFqv0OpnyR05tV3mdvgNC87GslCtFbnf7/R4PTfLwfYjm41I+P+AgYB7cyAZG4iJiouIdHh5RYSQd2R1Sg0RDwwAkXV8R5iGoguPXpZGDKKqIAeVpXqrqq6zSbGyjrSgtqO4vbq7rL5Ylbumhm0eycoSQ6GxfYqQD8+TqNMTDgXV23nY0A3cyMHhdBqG4OSmBgvj5BEGQgvo6WFBADs=";var c=null,n=false,r=[];w.debugLogging=true;w.markPageLoaded=function(){n=true};w.launchRDP=function(I,G){var E=800,L=600,H=24;if(G!=undefined){var M=G.split("x");E=parseInt(M[0]);L=parseInt(M[1]);if(M.length>2){H=parseInt(M[2])}}var F=(screen.width-E)/2,J=(screen.height-(L+100))/2;var K=window.open("http://cernvm.cern.ch/releases/webapi/webrdp/webclient.html#"+I+","+E+","+L,"WebRDPClient","width="+E+",height="+(L+100),",left="+F+",top="+J);K.focus();return K};w.startCVMWebAPI=function(H,G,E){var F=function(){var I=new w.WebAPIPlugin();I.connect(function(J){if(J){H(I)}else{var K=document.createElement("iframe");K.src="http://cernvm.cern.ch/releases/webapi/install";K.width="100%";K.height=400;K.frameBorder=0;d.createFramedWindow({body:K,icon:q,disposable:false});var L=function(){I=new w.WebAPIPlugin();I.connect(function(M){if(M){H(I);d.hideInteraction()}else{setTimeout(function(){L()},1000)}},false)};L()}})};if(!n){r.push(F)}else{F()}};var o=0;var e=1;var t="ws://127.0.0.1:5624",l="cernvm-webapi://launch",j="http://127.0.0.1:5624/info";var x=1,h=2,k=4,A=8,p=16;var g=1,C=2,D=256;var s=1;function B(F){var E=["missing","available","poweroff","saved","paused","running"];if((F<0)||(F>=E.length)){return"unknown"}return E[F]}function i(J,I){var H=J.split("."),F=H[2]+H[1]*100+H[0]*10000,G=I.split("."),E=G[2]+G[1]*100+G[0]*10000;return F-E}var b="cernvm-webapi-launcher-"+(Math.random().toString().substr(2));w.EventDispatcher=function(E){this.events={}};w.EventDispatcher.prototype.__fire=function(F,E){if(w.debugLogging){console.log("Firing",F,"(",E,")")}if(this.events[F]==undefined){return}var H=this.events[F];for(var G=0;G<H.length;G++){H[G].apply(this,E)}};w.EventDispatcher.prototype.addEventListener=function(E,F){if(this.events[E]==undefined){this.events[E]=[]}this.events[E].push(F)};w.EventDispatcher.prototype.removeEventListener=function(E,G){if(this.events[E]==undefined){return}var F=this.events[E].indexOf(G);if(F<0){return}this.events.splice(F,1)};var v=function(F){var E=0;if(F.use64bit){E|=x}if(F.useBootDisk){E|=h}if(F.useGuestAdditions){E|=k}if(F.useFloppyIO){E|=A}if(F.headful){E|=p}return E};var u=function(G){var E=function(H){G.__config.flags=H;G.setAsync("flags",H)},F=function(){return G.__config.flags};Object.defineProperties(this,{value:{get:function(){return F()},set:function(H){E(H)}},use64bit:{get:function(){return((F()&x)!=0)},set:function(H){if(H){E(F()|x)}else{E(F()&~x)}}},useBootDisk:{get:function(){return((F()&h)!=0)},set:function(H){if(H){E(F()|h)}else{E(F()&~h)}}},useGuestAdditions:{get:function(){return((F()&k)!=0)},set:function(H){if(H){E(F()|k)}else{E(F()&~k)}}},useFloppyIO:{get:function(){return((F()&A)!=0)},set:function(H){if(H){E(F()|A)}else{E(F()&~A)}}},headful:{get:function(){return((F()&p)!=0)},set:function(H){if(H){E(F()|p)}else{E(F()&~p)}}}})};w.ProgressFeedback=function(){};w.Socket=function(){w.EventDispatcher.call(this);this.interaction=new d(this);this.connecting=false;this.connected=false;this.socket=null;this.lastID=0;this.responseCallbacks={};this.authToken="";if(window.location.hash){this.authToken=window.location.hash.substr(1)}};w.Socket.prototype=Object.create(w.EventDispatcher.prototype);w.Socket.prototype.__reheat=function(E){};w.Socket.prototype.__handleClose=function(){this.__fire("disconnected",[]);d.hideInteraction()};w.Socket.prototype.__handleOpen=function(E){this.__fire("connected",E.version)};w.Socket.prototype.__handleData=function(F){var G=JSON.parse(F);if(G.id){var E=this.responseCallbacks[G.id];if(E!=undefined){E(G)}}else{if(G.type=="event"){var F=G.data;if(G.name=="interact"){this.interaction.handleInteractionEvent(G.data)}else{this.__fire(G.name,G.data)}}}};w.Socket.prototype.send=function(G,H,J,I){var L=this;var K=null;var M="a-"+(++this.lastID);var E={type:"action",name:G,id:M,data:H||{}};if(typeof(J)=="function"){if(I!==0){K=setTimeout(function(){delete L.responseCallbacks[M];J(null,"Response timeout")},I||10000)}this.responseCallbacks[M]=function(N){if(K!=null){clearTimeout(K)}if(N.type=="result"){delete L.responseCallbacks[M];J(N.data)}}}else{if(typeof(J)=="object"){var F=function(N){if(!N){return""}return"on"+N[0].toUpperCase()+N.substr(1)};if(I!==0){K=setTimeout(function(){delete L.responseCallbacks[M];if(J.onError){J.onError("Response timeout")}},I||10000)}this.responseCallbacks[M]=function(O){if(K!=null){clearTimeout(K)}if((O.name=="succeed")||(O.name=="failed")){delete L.responseCallbacks[M]}var N=F(O.name);if(J[N]){J[N].apply(L,O.data||[])}}}}this.socket.send(JSON.stringify(E))};w.Socket.prototype.close=function(){if(!this.connected){return}this.socket.close();this.connected=false;this.__handleClose()};w.Socket.prototype.connect=function(E,F){var N=this;if(this.connected){return}if(F==undefined){F=false}if(this.connecting){return}this.connecting=true;var M=function(O){a.request(j,function(Q,P){if(Q==null){O(false)}else{O(true)}})};var L=function(O,R){try{if(!R){R=500}var Q=false,T=setTimeout(function(){Q=true;O(false)},R);var P=new WebSocket(t);P.onerror=function(U){if(Q){return}clearTimeout(T);if(!N.connecting){return}P.close();O(false)};P.onopen=function(U){if(Q){return}clearTimeout(T);if(!N.connecting){return}O(true,P)}}catch(S){console.warn("[socket] Error setting up socket! ",S);if(Q){return}clearTimeout(T);if(!N.connecting){return}P.close();O(false)}};var I=function(S,U,X,P){var Q=new Date().getTime();if(!P){P=Q}if(!X){X=500}var O=U-(Q-P);var R=false,V=setTimeout(function(){R=true;S(false)},O);var W=function(Z,Y){if(R){return}if(Z){clearTimeout(V);S(true,Y)}else{if(O<X){return}clearTimeout(V);setTimeout(function(){I(S,U,X,P)},X)}};var T=500;if(O<T){T=O}L(W,T)};var H=function(O,P){N.connecting=false;N.connected=true;N.socket=O;N.socket.onclose=function(){console.warn("Socket disconnected");d.hideInteraction();N.connecting=true;I(function(R,Q){if(!R){console.error("Connection with CernVM WebAPI interrupted");N.__handleClose()}else{H(Q,true)}},2000)};N.socket.onmessage=function(Q){N.__handleData(Q.data)};N.send("handshake",{version:w.version,auth:N.authToken},function(S,R,Q){console.info("Successful handshake with CernVM WebAPI v"+S.version);N.version=S.version;if(i(w.version,N.version)>0){d.alertUpgrade("You are using an old version of CernVM WebAPI. Click here to upgrade to <strong>"+w.version+"</strong>.")}N.__handleOpen(S);if(P){N.__reheat(O)}});if(E){E(true)}};var K=function(O){console.error("Unable to contact CernVM WebAPI");if(!N.connecting){return}N.connecting=false;N.connected=false;if(E){E(false)}};var J=function(P,O){if(!P){K()}else{H(O)}};var G=function(Q,O,T){var S=1,R=function(){if(++S>O){console.log("[socket] Ran out of retries");T(false);return}else{console.log("[socket] Scheduling retry in 100ms");setTimeout(P,100)}},P=function(){console.log("[socket] Probe try");M(function(U){if(U){L(function(W,V){if(W){T(W,V)}else{R()}},Q)}else{R()}})};console.log("[socket] Trying socket probe with ",O," retries");P()};console.log("[socket] Starting probe with 4 retries");G(500,4,function(P,O){if(P){console.log("[socket] Got socket");H(O)}else{if(F){console.log("[socket] Auto-launching");var Q=document.getElementById(b);if(!Q){Q=document.createElement("iframe");Q.style.width="1";Q.style.height="1";Q.style.position="absolute";Q.style.left="-1000px";Q.style.top="-1000px";Q.id=b;document.body.appendChild(Q)}var Q=document.getElementById(b);Q.src=l;I(J,5000)}else{K()}}})};var z=null;var d=w.UserInteraction=function(E){var F=this;this.socket=E;this.onResize=null;window.addEventListener("resize",function(){if(F.onResize){F.onResize()}})};d.hideScreen=function(F){try{document.body.removeChild(F)}catch(E){}};d.hideInteraction=function(){if(d.activeScreen!=null){try{document.body.removeChild(d.activeScreen)}catch(E){}d.activeScreen=null}};d.createButton=function(H,I){var F=document.createElement("button");F.innerHTML=H;F.style.display="inline-block";F.style.marginBottom="0";F.style.textAlign="center";F.style.verticalAlign="middle";F.style.borderStyle="solid";F.style.borderWidth="1px";F.style.borderRadius=F.style.webkitBorderRadius=F.style.mozBorderRadius="4px";F.style.userSelect=F.style.webkitUserSelect=F.style.mozUserSelect=F.style.msUserSelect="none";F.style.margin="5px";F.style.padding="6px 12px";F.style.cursor="pointer";var E=function(J,N){var K=parseInt(J.slice(1),16),P=Math.round(2.55*N),M=(K>>16)+P,L=(K>>8&255)+P,O=(K&255)+P;return"#"+(16777216+(M<255?M<1?0:M:255)*65536+(L<255?L<1?0:L:255)*256+(O<255?O<1?0:O:255)).toString(16).slice(1)},G=function(N){var K=parseInt(N.slice(1),16),M=(K>>16),L=(K>>8&255),J=(K&255),O=(M*299+L*587+J*114)/1000;return(O>=128)?"black":"white"};F.style.backgroundColor=I;F.style.borderColor=E(I,-20);F.onmouseover=function(){F.style.backgroundColor=E(I,-10)};F.onmouseout=function(){F.style.backgroundColor=I};F.style.color=G(I);return F};d.styleFrame=function(E){E.style.backgroundColor="#FCFCFC";E.style.border="solid 1px #E6E6E6";E.style.borderRadius=E.style.webkitBorderRadius=E.style.mozBorderRadius="5px";E.style.boxShadow=E.style.webkitBoxShadow=E.style.mozBoxShadow="1px 2px 4px 1px rgba(0,0,0,0.2)";E.style.padding="10px";E.style.fontFamily="Verdana, Geneva, sans-serif";E.style.fontSize="14px";E.style.color="#666"};d.createGrowlWindow=function(F){if(!F){F={}}var H=F.body||"",E=F.href||"",K=F.target||"",M=F.icon||false,I=F.onClick||false;var G=document.createElement("a"),L=document.createElement("img"),J=document.createElement("div");G.appendChild(L);L.style.position="absolute";L.style.left="6px";L.style.top="12px";L.src=M||m;G.appendChild(J);J.style.position="absolute";J.style.left="45px";J.style.top="8px";J.style.width="300px";J.style.height="42px";J.style.fontSize="14px";J.style.color="#333";J.innerHTML=H;G.style.position="absolute";G.style.display="block";G.style.top="10px";G.style.right="10px";G.style.zIndex=60000;G.style.width="350px";G.style.height="60px";G.style.backgroundImage=q;G.style.backgroundPosition="bottom left";G.style.textDecoration="none";G.href=E;G.target=K;d.styleFrame(G);G.onclick=function(){document.body.removeChild(G);if(I){I()}};document.body.appendChild(G);return G};d.createFramedWindow=function(G){if(!G){G={}}var J=G.body||"",I=G.header||false,S=G.footer||false,Q=G.icon||false,L=G.onClose||false,P=(G.disposable!=undefined)?G.disposable:true;var O=document.createElement("div"),N=document.createElement("div"),F=document.createElement("div"),K=document.createElement("div"),H=document.createElement("div");O.style.position="absolute";O.style.left="0";O.style.top="0";O.style.right="0";O.style.bottom="0";O.style.zIndex=60000;O.style.backgroundColor="rgba(255,255,255,0.5)";O.appendChild(N);N.style.marginLeft="auto";N.style.marginRight="auto";N.style.marginBottom=0;N.style.marginTop=0;d.styleFrame(N);N.style.width="70%";F.style.color="#333";F.style.marginBottom="8px";K.style.textAlign="center";K.style.color="#333";K.style.marginTop="8px";N.appendChild(F);if(I){if(typeof(I)=="string"){var M;if(Q){M=document.createElement("img");M.src=Q;M.style.verticalAlign="-8px";M.style.marginRight="6px"}else{M=document.createElement("span")}var E=document.createElement("span");E.innerHTML=I;E.style.fontSize="1.6em";E.style.marginBottom="8px";F.appendChild(M);F.appendChild(E)}else{F.appendChild(I)}}if(J){H.style.overflow="auto";H.appendChild(J)}N.appendChild(H);N.appendChild(K);if(S){if(typeof(S)=="string"){K.innerHTML=S}else{K.appendChild(S)}}var R=function(){var T=F.offsetHeight+K.offsetHeight+50;var V=window.innerHeight-T;H.style.maxHeight=V+"px";var U=(window.innerHeight-N.offsetHeight)/2;if(U<0){U=0}N.style.marginTop=U+"px"};O.onclick=function(){if(!P){return}if(L){L()}else{d.hideInteraction()}};N.onclick=function(T){T.stopPropagation()};d.hideInteraction();document.body.appendChild(O);d.activeScreen=O;R();this.onResize=R;return O};d.displayLicenseWindow=function(M,J,H,L,G){var I=document.createElement("div"),N=document.createElement("span"),F;N.innerHTML="&nbsp;";if(H){F=document.createElement("iframe"),F.src=J;F.width="100%";F.height=450;F.frameBorder=0}else{F=document.createElement("div");F.width="100%";F.style.height="450px";F.style.display="block";F.innerHTML=J.replace(/\n/g,"<br/>\n")}var E=d.createButton("Accept License","#E1E1E1");lnkCancel=d.createButton("Decline License","#FAFAFA");I.style.padding="6px";I.appendChild(E);I.appendChild(N);I.appendChild(lnkCancel);var K;K=d.createFramedWindow({body:F,header:M,footer:I,icon:y,onClose:function(){document.body.removeChild(K);if(G){G()}}});E.onclick=function(){document.body.removeChild(K);if(L){L()}};lnkCancel.onclick=function(){document.body.removeChild(K);if(G){G()}};return win};d.alertUpgrade=function(E,F){d.createGrowlWindow({body:E,icon:q,cbClick:F,target:"_blank",href:"http://cernvm.cern.ch/releases/webapi/install"})};d.confirm=function(J,E,L){var I=document.createElement("div"),K=document.createElement("div");I.innerHTML=E;I.style.width="100%";var H,G=d.createButton("Ok","#E1E1E1"),F=d.createButton("Cancel","#FAFAFA");G.onclick=function(){document.body.removeChild(H);L(true)};F.onclick=function(){document.body.removeChild(H);L(false)};K.appendChild(G);K.appendChild(F);H=d.createFramedWindow({body:I,header:J,footer:K,icon:f,onClose:function(){document.body.removeChild(H);L(false)}});return H};d.alert=function(I,E,K){var H=document.createElement("div"),J=document.createElement("div");H.innerHTML=E;H.style.width="100%";var G,F=d.createButton("Ok","#FAFAFA");F.onclick=function(){document.body.removeChild(G)};J.appendChild(F);G=d.createFramedWindow({body:H,header:I,footer:J,icon:m});return G};d.occupied=function(H,E){var G=document.createElement("div");G.innerHTML=E;G.style.width="100%";var F=d.createFramedWindow({body:G,header:H,icon:q,disposable:false});return F};d.confirmLicense=function(F,E,G){d.displayLicenseWindow(F,E,false,function(){G(true)},function(){G(false)})};d.confirmLicenseURL=function(F,E,G){d.displayLicenseWindow(F,E,true,function(){G(true)},function(){G(false)})};d.controlOccupied=function(E,F){if(E){if(!z){z=d.occupied("Installation in progress","<p>Pay attention on the the pop-up windows and follow the on-screen instructions.</p><p>When completed, please close any open installation window in order to continue.</p>")}}else{if(z){d.hideScreen(z);z=null}}};d.prototype.handleInteractionEvent=function(F){var E=this.socket;if(F[0]=="confirm"){d.confirm(F[1],F[2],function(G,H){if(G){E.send("interactionCallback",{result:g|(H?D:0)})}else{E.send("interactionCallback",{result:C|(H?D:0)})}})}else{if(F[0]=="alert"){d.alert(F[1],F[2],function(G){})}else{if(F[0]=="confirmLicense"){d.confirmLicense(F[1],F[2],function(G,H){if(G){E.send("interactionCallback",{result:g|(H?D:0)})}else{E.send("interactionCallback",{result:C|(H?D:0)})}})}else{if(F[0]=="confirmLicenseURL"){d.confirmLicenseURL(F[1],F[2],function(G,H){if(G){E.send("interactionCallback",{result:g|(H?D:0)})}else{E.send("interactionCallback",{result:C|(H?D:0)})}})}}}}};var a={XMLHttpFactories:[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new ActiveXObject("Msxml2.XMLHTTP.6.0")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],request:function(F,I,E){var G=this.createXMLHTTPObject();if(!G){return}var H=(E)?"POST":"GET";G.open(H,F,true);if(E){G.setRequestHeader("Content-type","application/x-www-form-urlencoded")}G.onreadystatechange=function(){if(G.readyState!=4){return}if(G.status!=200&&G.status!=304){I(null,G.status);return}I(G.responseText)};G.ontimeout=function(){I(null,false)};if(G.readyState==4){return}G.send(E)},createXMLHTTPObject:function(){var F=false;for(var E=0;E<this.XMLHttpFactories.length;E++){try{F=this.XMLHttpFactories[E]()}catch(G){continue}break}return F}};w.WebAPIPlugin=function(){w.Socket.call(this);this._sessions=[]};w.WebAPIPlugin.prototype=Object.create(w.Socket.prototype);w.WebAPIPlugin.prototype.__reheat=function(E){var F=this,H=false;this.responseCallbacks={};for(var G=0;G<this._sessions.length;G++){var I=this._sessions[G].ref,J=this._sessions[G].vmcp;if(I.__valid){this.send("requestSession",{vmcp:J},{onSucceed:function(L,K){console.log("Session ",K," reheated");I.session_id=K;F.responseCallbacks[K]=function(M){I.handleEvent(M)};setTimeout(function(){I.sync()},100)},onFailed:function(L,K){console.warn("Unable to reheat a saved session!");if(H){return}F.__handleClose();H=true},onLengthyTask:function(L,K){w.UserInteraction.controlOccupied(K,L)},onProgress:function(L,K){F.__fire("progress",[L,K])},onStarted:function(K){F.__fire("started",[K])},onCompleted:function(K){F.__fire("completed",[K])}})}}};w.WebAPIPlugin.prototype.stopService=function(){this.send("stopService")};w.WebAPIPlugin.prototype.requestSession=function(H,G,F){var E=this;this.send("requestSession",{vmcp:H},{onSucceed:function(K,I){var J=new w.WebAPISession(E,I,function(){if(G){G(J)}});E._sessions.push({vmcp:H,ref:J});E.responseCallbacks[I]=function(L){J.handleEvent(L)}},onFailed:function(J,I){console.error("Failed to request session! "+J);E.__fire("failed",[J]);if(F){F(J,I)}},onLengthyTask:function(J,I){w.UserInteraction.controlOccupied(I,J)},onProgress:function(J,I){E.__fire("progress",[J,I])},onStarted:function(I){E.__fire("started",[I])},onCompleted:function(I){E.__fire("completed",[I])}})};w.WebAPIPlugin.prototype.enumSessions=function(F){var E=this;if(!F){return}this.send("enumSessions",{},{onSucceed:function(G){F(G)},onFailed:function(H,G){F(null,H,G)}})};w.WebAPIPlugin.prototype.controlSession=function(F,G,H){var E=this;if(!H){return}this.send("controlSession",{session_id:F,action:G},{onSucceed:function(I){H(I)},onFailed:function(J,I){H(null,J,I)}})};w.WebAPISession=function(E,G,H){w.EventDispatcher.call(this);this.socket=E;this.session_id=G;this.__state=0;this.__apiState=false;this.__properties={};this.__config={};this.__valid=true;this.__lastRDPWindow=null;this.__initCallback=H;var F=undefined;Object.defineProperties(this,{state:{get:function(){if(!this.__valid){return F}return this.__state}},stateName:{get:function(){if(!this.__valid){return F}return B(this.__state)}},ip:{get:function(){if(!this.__valid){return F}return this.__config.ip}},memory:{get:function(){if(!this.__valid){return F}return this.__config.memory}},cpus:{get:function(){if(!this.__valid){return F}return this.__config.cpus}},disk:{get:function(){if(!this.__valid){return F}return this.__config.disk}},apiURL:{get:function(){if(!this.__valid){return F}return this.__config.apiURL}},apiAvailable:{get:function(){if(!this.__valid){return F}return this.__apiState}},rdpURL:{get:function(){if(!this.__valid){return F}return this.__config.rdpURL}},executionCap:{get:function(){if(!this.__valid){return F}return this.__config.executionCap},set:function(I){this.__config.executionCap=I;this.setAsync("executionCap",I)}},version:{get:function(){if(!this.__valid){return F}return this.__config.cernvmVersion},set:function(I){if(!this.__valid){return}this.__config.cernvmVersion=I;this.setAsync("cernvmVersion",I)}},"flavor ":{get:function(){if(!this.__valid){return F}return this.__config.cernvmFlavor},set:function(I){if(!this.__valid){return}this.__config.cernvmFlavor=I;this.setAsync("cernvmFlavor",I)}},diskURL:{get:function(){if(!this.__valid){return F}return this.__config.diskURL},set:function(I){if(!this.__valid){return}this.__config.diskURL=I;this.setAsync("diskURL",I)}},diskChecksum:{get:function(){if(!this.__valid){return F}return this.__config.diskChecksum},set:function(I){if(!this.__valid){return}this.__config.diskChecksum=I;this.setAsync("diskChecksum",I)}},flags:{get:function(){if(!this.__valid){return F}return new u(this)},set:function(I){if(typeof(I)=="number"){this.__config.flags=I}else{if(typeof(I)=="object"){this.__config.flags=v(I)}}}}})};w.WebAPISession.prototype=Object.create(w.EventDispatcher.prototype);w.WebAPISession.prototype.handleEvent=function(F){if(F.name=="stateVariables"){F=F.data;if(!F){return}else{if(F.length>=1){this.__config=F[0]||{}}if(F.length>=2){this.__properties=F[1]||{}}}if(this.__initCallback){this.__initCallback();this.__initCallback=null}return}else{if(F.name=="failure"){var E=F.data[0];if(E&s!=0){w.UserInteraction.alert("Virtualization Failure",'<p>The hypervisor was unable to use your hardware\'s virtualization capabilities. This happens either if you have an old hardware (more than 4 years old) or if the <strong>Virtualization Technology</strong> features is disabled from your <strong>BIOS</strong>.</p><p>There are various articles on the internet on how to enable this option from your BIOS. <a target="_blank" href="http://www.sysprobs.com/disable-enable-virtualization-technology-bios">You can read this article for example.</a></p>')}}else{if(F.name=="stateChanged"){this.__state=F.data[0]}else{if(F.name=="lengthyTask"){w.UserInteraction.controlOccupied(F.data[1],F.data[0])}else{if(F.name=="apiStateChanged"){this.__apiState=(F.data[0]==1)}else{if(F.name=="resolutionChanged"){if(this.__config.rdpURL!=undefined){var H=this.__config.rdpURL.split("@");this.__config.rdpURL=H[0]+"@"+F.data[0]+"x"+F.data[1]+"x"+F.data[2];if(this.__lastRDPWindow){try{this.__lastRDPWindow.resizeTo(parseInt(F.data[0]),parseInt(F.data[1]))}catch(G){}}}}}}}}}this.__fire(F.name,F.data)};w.WebAPISession.prototype.start=function(E){if(!this.__valid){return}this.socket.send("start",{session_id:this.session_id,parameters:E||{}})};w.WebAPISession.prototype.stop=function(){if(!this.__valid){return}this.socket.send("stop",{session_id:this.session_id})};w.WebAPISession.prototype.pause=function(){if(!this.__valid){return}this.socket.send("pause",{session_id:this.session_id})};w.WebAPISession.prototype.resume=function(){if(!this.__valid){return}this.socket.send("resume",{session_id:this.session_id})};w.WebAPISession.prototype.reset=function(){if(!this.__valid){return}this.socket.send("reset",{session_id:this.session_id})};w.WebAPISession.prototype.hibernate=function(){if(!this.__valid){return}this.socket.send("hibernate",{session_id:this.session_id})};w.WebAPISession.prototype.close=function(){this.socket.send("close",{session_id:this.session_id})};w.WebAPISession.prototype.sync=function(){if(!this.__valid){return}this.socket.send("sync",{session_id:this.session_id})};w.WebAPISession.prototype.getAsync=function(F,E){if(!this.__valid){return}this.socket.send("get",{session_id:this.session_id,key:F},{onSucceed:function(G){if(E){E(G)}}})};w.WebAPISession.prototype.setAsync=function(G,F,E){if(!this.__valid){return}this.socket.send("set",{session_id:this.session_id,key:G,value:F},{onSucceed:function(){if(E){E()}}})};w.WebAPISession.prototype.getProperty=function(E){if(!this.__valid){return}if(!E){return""}if(this.__properties[E]==undefined){return""}return this.__properties[E]};w.WebAPISession.prototype.setProperty=function(E,F){if(!this.__valid){return}if(!E){return""}this.__properties[E]=F;this.socket.send("setProperty",{session_id:this.session_id,key:E,value:F})};w.WebAPISession.prototype.openRDPWindow=function(H,E){if(!this.__valid){return}var F=this;if(this.__config.rdpURL){var G=this.__config.rdpURL.split("@");this.__lastRDPWindow=w.launchRDP(G[0],G[1])}else{this.getAsync("rdpURL",function(J){var I=J.split("@");F.__lastRDPWindow=w.launchRDP(I[0],I[1])})}};if(window.jQuery==undefined){if(n){return}window.addEventListener("load",function(F){n=true;for(var E=0;E<r.length;E++){r[E]()}})}else{jQuery(function(){if(n){return}n=true;for(var E=0;E<r.length;E++){r[E]()}})}})(window.CVM);